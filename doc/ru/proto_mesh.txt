	Copyright Unet Global LLC 2017-2018

	Протокол mesh.

1. Общие сведения.

	Данный протокол реализует MESH-топологию связности между экземплярами ПО IOT Gateway (далее "узлами"), согласно которой каждый узел
устанавлиевает все возможные прямые сетевые соединения с каждым другим узлом, отслеживая скорость работы каждого из соединений. При этом узлы
обмениваются информацией об установленных соединениях со своими непосредственными соседями, на основании чего реализуется оптимальная динамическая
маршрутизация. Это позволяет создавать между двумя несвязанными узлами виртуальные соединения ("туннели"). Такой туннель позволяет:
	1) абстрагироваться от факта наличия прямой связи;
	2) абстрагироваться от конкретного пути между двумя узлами (при обрыве одного пути будет прозрачно выбран другой оптимальный);
	3) распределять трафик по нескольким каналам связи;
	4) использовать один узел в качестве прокси-сервера для другого узла при установке TCP или UDP соединений с произвольными хостами.


X. Наметки реализации проксирования.

Для netcon_tcp, netcon_udp и прочих физических соединений сделать опцию для указания проксирующего хоста (как вариант - автоматический поиск
такого хоста, через который соединение сможет установиться, что актуально для конфигураций, где не все хосты имеют полноценный выход в Интернет,
или Bluetooth устройство может мигрировать от одного хоста к другому). Т.е. проксирование реализуется для netcontype.
В случае проксирования:
	- поднять от "клиента" mesh-канал (netcon_mesh) до проксирующего хоста по специальному протоколу proxy, передав в метаданных параметры
физического подключения (netcontype ID, хост/порт для TCP/UDP и т.п.)
	- реализация proxy протокола создаст на второй стороне физическое подключение (к "серверу") со специальным netproto_proxyslave, сессия
которого все полученные от сервера данные передает по mesh-каналу так, чтобы они напрямую попали в настоящую сессию настоящего протокола на
клиентской стороне, и наоборот.

ХХ. Наметка о датаграмных соединениях

Для упрощения работы виртуальных соединений по протоколам, которые не требуют соблюдения порядка пакетов, а также для проксирования UDP соединений,
пытаться создавать реальные UDP соединения между хостами на равне с TCP mesh соединениями. При этом TCP соединение будет главным, и только по нему будет
производиться авторизация и договоренность о ключах цифровых подписей. UDP соединение может создаваться mesh-сессией после успешного согласования и только на
те же IP/порт, что и основное TCP. При этом каждая mesh-сессия только сама будет знать, работает ли ее UDP связь, и надо ли конкретный пакет meshdatagram
пытаться отправлять по TCP каналу, или просто отбросить.
